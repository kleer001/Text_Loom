{
  "software": "Text Loom",
  "version": 0.01,
  "timestamp": "2025-03-17T14:18:58.146799",
  "nodes": {
    "/looper_1": {
      "_node_type": "looper",
      "_path": "/looper_1",
      "_name": "looper_1",
      "_is_internal": false,
      "_parms": {
        "min": {
          "_name": "min",
          "_type": "int",
          "_node": "/looper_1",
          "_script_callback": "",
          "_value": 1
        },
        "max": {
          "_name": "max",
          "_type": "int",
          "_node": "/looper_1",
          "_script_callback": "",
          "_value": 309
        },
        "step": {
          "_name": "step",
          "_type": "int",
          "_node": "/looper_1",
          "_script_callback": "",
          "_value": 1
        },
        "max_from_input": {
          "_name": "max_from_input",
          "_type": "toggle",
          "_node": "/looper_1",
          "_script_callback": "",
          "_value": false
        },
        "feedback_mode": {
          "_name": "feedback_mode",
          "_type": "toggle",
          "_node": "/looper_1",
          "_script_callback": "",
          "_value": false
        },
        "use_test": {
          "_name": "use_test",
          "_type": "toggle",
          "_node": "/looper_1",
          "_script_callback": "",
          "_value": false
        },
        "cook_loops": {
          "_name": "cook_loops",
          "_type": "toggle",
          "_node": "/looper_1",
          "_script_callback": "",
          "_value": true
        },
        "test_number": {
          "_name": "test_number",
          "_type": "int",
          "_node": "/looper_1",
          "_script_callback": "",
          "_value": 1
        },
        "input_hook": {
          "_name": "input_hook",
          "_type": "string",
          "_node": "/looper_1",
          "_script_callback": "",
          "_value": ""
        },
        "output_hook": {
          "_name": "output_hook",
          "_type": "string",
          "_node": "/looper_1",
          "_script_callback": "",
          "_value": ""
        },
        "staging_data": {
          "_name": "staging_data",
          "_type": "stringList",
          "_node": "/looper_1",
          "_script_callback": "",
          "_value": []
        },
        "timeout_limit": {
          "_name": "timeout_limit",
          "_type": "float",
          "_node": "/looper_1",
          "_script_callback": "",
          "_value": 3000.0
        },
        "data_limit": {
          "_name": "data_limit",
          "_type": "int",
          "_node": "/looper_1",
          "_script_callback": "",
          "_value": 209715200
        }
      },
      "_connections": []
    },
    "/looper_1/inputNullNode": {
      "_node_type": "input_null",
      "_path": "/looper_1/inputNullNode",
      "_name": "inputNullNode",
      "_is_internal": true,
      "_parms": {
        "in_node": {
          "_name": "in_node",
          "_type": "string",
          "_node": "/looper_1/inputNullNode",
          "_script_callback": "",
          "_value": "/looper_1"
        },
        "in_data": {
          "_name": "in_data",
          "_type": "stringList",
          "_node": "/looper_1/inputNullNode",
          "_script_callback": "",
          "_value": []
        },
        "feedback_mode": {
          "_name": "feedback_mode",
          "_type": "toggle",
          "_node": "/looper_1/inputNullNode",
          "_script_callback": "",
          "_value": false
        }
      },
      "_connections": []
    },
    "/looper_1/outputNullNode": {
      "_node_type": "output_null",
      "_path": "/looper_1/outputNullNode",
      "_name": "outputNullNode",
      "_is_internal": true,
      "_parms": {
        "out_data": {
          "_name": "out_data",
          "_type": "stringList",
          "_node": "/looper_1/outputNullNode",
          "_script_callback": "",
          "_value": []
        },
        "feedback_mode": {
          "_name": "feedback_mode",
          "_type": "toggle",
          "_node": "/looper_1/outputNullNode",
          "_script_callback": "",
          "_value": false
        },
        "cook_loops": {
          "_name": "cook_loops",
          "_type": "toggle",
          "_node": "/looper_1/outputNullNode",
          "_script_callback": "",
          "_value": false
        },
        "in_node": {
          "_name": "in_node",
          "_type": "string",
          "_node": "/looper_1/outputNullNode",
          "_script_callback": "",
          "_value": "/looper_1"
        }
      },
      "_connections": [
        {
          "input_index": 0,
          "output_node_path": "/looper_1/file_out_1",
          "input_node_path": "/looper_1/outputNullNode",
          "output_index": 0
        }
      ]
    },
    "/looper_1/query_1": {
      "_node_type": "query",
      "_path": "/looper_1/query_1",
      "_name": "query_1",
      "_is_internal": false,
      "_parms": {
        "limit": {
          "_name": "limit",
          "_type": "toggle",
          "_node": "/looper_1/query_1",
          "_script_callback": "",
          "_value": false
        },
        "response": {
          "_name": "response",
          "_type": "stringList",
          "_node": "/looper_1/query_1",
          "_script_callback": "",
          "_value": []
        },
        "llm_name": {
          "_name": "llm_name",
          "_type": "string",
          "_node": "/looper_1/query_1",
          "_script_callback": "",
          "_value": "Ollama"
        },
        "find_llm": {
          "_name": "find_llm",
          "_type": "button",
          "_node": "/looper_1/query_1",
          "_script_callback": null,
          "_value": ""
        },
        "respond": {
          "_name": "respond",
          "_type": "button",
          "_node": "/looper_1/query_1",
          "_script_callback": null,
          "_value": ""
        }
      },
      "_connections": []
    },
    "/looper_1/READ_FABLES": {
      "_node_type": "file_in",
      "_path": "/looper_1/READ_FABLES",
      "_name": "READ_FABLES",
      "_is_internal": false,
      "_parms": {
        "file_name": {
          "_name": "file_name",
          "_type": "string",
          "_node": "/looper_1/READ_FABLES",
          "_script_callback": "",
          "_value": "/home/menser/Dropbox/ai/code/aesop_extract/fables/aesopFable_$$L.txt"
        },
        "file_text": {
          "_name": "file_text",
          "_type": "string",
          "_node": "/looper_1/READ_FABLES",
          "_script_callback": "",
          "_value": "The Bat And The Weasels\n\nA BAT who fell upon the ground and was caught by a Weasel pleaded to be\nspared his life. The Weasel refused, saying that he was by nature the\nenemy of all birds. The Bat assured him that he was not a bird, but a\nmouse, and thus was set free. Shortly afterwards the Bat again fell to\nthe ground and was caught by another Weasel, whom he likewise entreated\nnot to eat him. The Weasel said that he had a special hostility to\nmice. The Bat assured him that he was not a mouse, but a bat, and thus a\nsecond time escaped.\n\nIt is wise to turn circumstances to good account.\n\n"
        },
        "refresh": {
          "_name": "refresh",
          "_type": "button",
          "_node": "/looper_1/READ_FABLES",
          "_script_callback": "self.node().refresh()",
          "_value": ""
        }
      },
      "_connections": []
    },
    "/looper_1/GET_PROMPT": {
      "_node_type": "file_in",
      "_path": "/looper_1/GET_PROMPT",
      "_name": "GET_PROMPT",
      "_is_internal": false,
      "_parms": {
        "file_name": {
          "_name": "file_name",
          "_type": "string",
          "_node": "/looper_1/GET_PROMPT",
          "_script_callback": "",
          "_value": "/home/menser/Dropbox/ai/code/aesop_extract/translatePrompt.txt"
        },
        "file_text": {
          "_name": "file_text",
          "_type": "string",
          "_node": "/looper_1/GET_PROMPT",
          "_script_callback": "",
          "_value": "# Aesop's Fables Modernization Prompt\n\n## Task\nTransform the provided Aesop's fable into contemporary English for children ages 7-12.\n\n## Style Guidelines\n- Use simple, direct language appropriate for modern children\n- Aim for a 3rd-4th grade reading level\n- Use contractions naturally (don't, can't, wouldn't)\n- Format dialogue with modern conventions and quotation marks\n- Maintain a light, engaging tone\n\n## Content Transformation Rules\n- Replace archaic words, phrases, and syntax with modern equivalents\n- Substitute Greek/Roman gods with neutral terms (Jupiter \u2192 \"the sky\" or \"nature\")\n- Update historical occupations to modern counterparts\n- Convert any outdated cultural references to familiar concepts\n- Remove explicitly stated morals at the end\n\n## Process\n1. Read the fable completely\n2. Identify outdated language, references, and concepts\n3. Rewrite while maintaining the core story and characters\n4. Focus on making the story enjoyable rather than didactic\n5. Use contemporary examples or analogies where helpful\n\n## Example Original Fable followed by the translation\n```\nThe Wolf And The Lamb\n\nWOLF, meeting with a Lamb astray from the fold, resolved not to lay\nviolent hands on him, but to find some plea to justify to the Lamb the\nWolf's right to eat him. He thus addressed him: \"Sirrah, last year you\ngrossly insulted me.\" \"Indeed,\" bleated the Lamb in a mournful tone\nof voice, \"I was not then born.\" Then said the Wolf, \"You feed in my\npasture.\" \"No, good sir,\" replied the Lamb, \"I have not yet tasted\ngrass.\" Again said the Wolf, \"You drink of my well.\" \"No,\" exclaimed the\nLamb, \"I never yet drank water, for as yet my mother's milk is both food\nand drink to me.\" Upon which the Wolf seized him and ate him up, saying,\n\"Well! I won't remain supperless, even though you refute every one of my\nimputations.\" The tyrant will always find a pretext for his tyranny.\n```\n\n```\nThe Wolf and the Little Lamb\n\nA hungry Wolf spotted a small Lamb who had wandered away from its flock. Instead of attacking right away, the Wolf decided to come up with a good excuse first.\n\n\"Hey you!\" called the Wolf. \"Last year you were really rude to me!\"\nThe Lamb looked confused. \"That's impossible,\" it said. \"I wasn't even born last year.\"\n\"Well,\" said the Wolf, \"you've been eating grass from my field.\"\n\"I've never eaten grass,\" replied the Lamb. \"I'm still too young\u2014I only drink my mother's milk.\"\n\"Then you must have been drinking from my pond,\" growled the Wolf.\n\"I've never had water either,\" said the Lamb. \"Like I said, I only drink milk.\"\nThe Wolf rolled his eyes and pounced on the little Lamb.\n\"I'm not going to bed hungry tonight,\" said the Wolf as he licked his lips, \"even if none of my excuses worked!\"\n```\n\nThis modern version features:\n- Retained logical flow\n- Retained descriptions and explanations\n- Retained names of characters by their animal type\n- Natural contemporary American English dialogue\n- No archaic terms (removed \"Sirrah,\" \"grossly insulted,\" etc.)\n- Modern conversational flow with contractions\n- Removal of the explicit moral at the end (do not note that if it was removed)\n- Age-appropriate storytelling while keeping the core plot and visual details intact\n\n---\nLeave out any introductions, descriptions, or explanations before the fable or after it. Remove any introductions before the title of the fable. Remove any notes. Remove anything that isn't part of the fable. \n\nAll we need is the translated fable its self. Thank you. \n\nHere is the Aesop Fable to translate: \n\n"
        },
        "refresh": {
          "_name": "refresh",
          "_type": "button",
          "_node": "/looper_1/GET_PROMPT",
          "_script_callback": "self.node().refresh()",
          "_value": ""
        }
      },
      "_connections": []
    },
    "/looper_1/merge_1": {
      "_node_type": "merge",
      "_path": "/looper_1/merge_1",
      "_name": "merge_1",
      "_is_internal": false,
      "_parms": {
        "single_string": {
          "_name": "single_string",
          "_type": "toggle",
          "_node": "/looper_1/merge_1",
          "_script_callback": "",
          "_value": true
        },
        "use_insert": {
          "_name": "use_insert",
          "_type": "toggle",
          "_node": "/looper_1/merge_1",
          "_script_callback": "",
          "_value": false
        },
        "insert_string": {
          "_name": "insert_string",
          "_type": "string",
          "_node": "/looper_1/merge_1",
          "_script_callback": "",
          "_value": "##N"
        }
      },
      "_connections": [
        {
          "input_index": 0,
          "output_node_path": "/looper_1/GET_PROMPT",
          "input_node_path": "/looper_1/merge_1",
          "output_index": 0
        },
        {
          "input_index": 1,
          "output_node_path": "/looper_1/READ_FABLES",
          "input_node_path": "/looper_1/merge_1",
          "output_index": 0
        }
      ]
    },
    "/looper_1/query_2": {
      "_node_type": "query",
      "_path": "/looper_1/query_2",
      "_name": "query_2",
      "_is_internal": false,
      "_parms": {
        "limit": {
          "_name": "limit",
          "_type": "toggle",
          "_node": "/looper_1/query_2",
          "_script_callback": "",
          "_value": true
        },
        "response": {
          "_name": "response",
          "_type": "stringList",
          "_node": "/looper_1/query_2",
          "_script_callback": "",
          "_value": [
            "The Bat and the Weasels\n\nA BAT who fell onto the ground and got caught by a WEASEL begged to be spared his life. The WEASEL refused, saying that he was naturally the enemy of all birds. The BAT assured him that he wasn't a bird, but a mouse, so the WEASEL let him go.\n\nNot long after, the BAT fell onto the ground again and got caught by another WEASEL. He asked this one not to eat him too. The WEASEL said that he had a special hatred for mice. The BAT told him he wasn't a mouse \u2013 he was a bat! And once again, the BAT escaped.\n\n"
          ]
        },
        "llm_name": {
          "_name": "llm_name",
          "_type": "string",
          "_node": "/looper_1/query_2",
          "_script_callback": "",
          "_value": "Ollama"
        },
        "find_llm": {
          "_name": "find_llm",
          "_type": "button",
          "_node": "/looper_1/query_2",
          "_script_callback": null,
          "_value": ""
        },
        "respond": {
          "_name": "respond",
          "_type": "button",
          "_node": "/looper_1/query_2",
          "_script_callback": null,
          "_value": ""
        }
      },
      "_connections": [
        {
          "input_index": 0,
          "output_node_path": "/looper_1/merge_1",
          "input_node_path": "/looper_1/query_2",
          "output_index": 0
        }
      ]
    },
    "/looper_1/file_out_1": {
      "_node_type": "file_out",
      "_path": "/looper_1/file_out_1",
      "_name": "file_out_1",
      "_is_internal": false,
      "_parms": {
        "file_name": {
          "_name": "file_name",
          "_type": "string",
          "_node": "/looper_1/file_out_1",
          "_script_callback": "",
          "_value": "/home/menser/Dropbox/ai/code/aesop_extract/fables/translatedFable_$$L.txt"
        },
        "file_text": {
          "_name": "file_text",
          "_type": "string",
          "_node": "/looper_1/file_out_1",
          "_script_callback": "",
          "_value": "The Bat and the Weasels\n\nA BAT who fell onto the ground and got caught by a WEASEL begged to be spared his life. The WEASEL refused, saying that he was naturally the enemy of all birds. The BAT assured him that he wasn't a bird, but a mouse, so the WEASEL let him go.\n\nNot long after, the BAT fell onto the ground again and got caught by another WEASEL. He asked this one not to eat him too. The WEASEL said that he had a special hatred for mice. The BAT told him he wasn't a mouse \u00e2\u0080\u0093 he was a bat! And once again, the BAT escaped.\n\n"
        },
        "refresh": {
          "_name": "refresh",
          "_type": "button",
          "_node": "/looper_1/file_out_1",
          "_script_callback": "self.node().refresh()",
          "_value": ""
        },
        "format_output": {
          "_name": "format_output",
          "_type": "toggle",
          "_node": "/looper_1/file_out_1",
          "_script_callback": "",
          "_value": true
        }
      },
      "_connections": [
        {
          "input_index": 0,
          "output_node_path": "/looper_1/query_2",
          "input_node_path": "/looper_1/file_out_1",
          "output_index": 0
        }
      ]
    }
  },
  "globals": {
    "FOO": "123",
    "TEST": "4321"
  }
}